(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{244:function(e,t,a){"use strict";a.r(t);var s=a(3),r=Object(s.a)({},(function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"v8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8"}},[e._v("#")]),e._v(" V8")]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("v8")]),e._v(" module exposes APIs that are specific to the version of "),a("a",{attrs:{href:"https://developers.google.com/v8/",target:"_blank",rel:"noopener noreferrer"}},[e._v("V8"),a("OutboundLink")],1),e._v("\nbuilt into the Node.js binary. It can be accessed using:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" v8 "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'v8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("p",[e._v("The APIs and implementation are subject to change at any time.")]),e._v(" "),a("h2",{attrs:{id:"v8-cacheddataversiontag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-cacheddataversiontag"}},[e._v("#")]),e._v(" v8.cachedDataVersionTag()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {integer}")])]),e._v(" "),a("p",[e._v('Returns an integer representing a "version tag" derived from the V8 version,\ncommand line flags and detected CPU features. This is useful for determining\nwhether a '),a("router-link",{attrs:{to:"/node/vm.html#vm_constructor_new_vm_script_code_options"}},[a("code",[e._v("vm.Script")])]),e._v(" "),a("code",[e._v("cachedData")]),e._v(" buffer is compatible with this instance\nof V8.")],1),e._v(" "),a("h2",{attrs:{id:"v8-getheapspacestatistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-getheapspacestatistics"}},[e._v("#")]),e._v(" v8.getHeapSpaceStatistics()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {Object[]}")])]),e._v(" "),a("p",[e._v("Returns statistics about the V8 heap spaces, i.e. the segments which make up\nthe V8 heap. Neither the ordering of heap spaces, nor the availability of a\nheap space can be guaranteed as the statistics are provided via the V8\n"),a("a",{attrs:{href:"https://v8docs.nodesource.com/node-10.6/d5/dda/classv8_1_1_isolate.html#ac673576f24fdc7a33378f8f57e1d13a4",target:"_blank",rel:"noopener noreferrer"}},[a("code",[e._v("GetHeapSpaceStatistics")]),a("OutboundLink")],1),e._v(" function and may change from one V8 version to the\nnext.")]),e._v(" "),a("p",[e._v("The value returned is an array of objects containing the following properties:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("space_name")]),e._v(" {string}")]),e._v(" "),a("li",[a("code",[e._v("space_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("space_used_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("space_available_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("physical_space_size")]),e._v(" {number}")])]),e._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"new_space"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2063872")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_used_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("951112")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_available_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("80824")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"physical_space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2063872")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"old_space"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3090560")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_used_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("2493792")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_available_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"physical_space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3090560")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"code_space"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1260160")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_used_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("644256")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_available_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("960")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"physical_space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1260160")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"map_space"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1094160")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_used_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("201608")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_available_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"physical_space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1094160")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v('"large_object_space"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_used_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"space_available_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1490980608")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[e._v('"physical_space_size"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v("\n")])])]),a("h2",{attrs:{id:"v8-getheapsnapshot"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-getheapsnapshot"}},[e._v("#")]),e._v(" v8.getHeapSnapshot()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {stream.Readable} A Readable Stream containing the V8 heap snapshot")])]),e._v(" "),a("p",[e._v("Generates a snapshot of the current V8 heap and returns a Readable\nStream that may be used to read the JSON serialized representation.\nThis JSON stream format is intended to be used with tools such as\nChrome DevTools. The JSON schema is undocumented and specific to the\nV8 engine, and may change from one version of V8 to the next.")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" stream "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("getHeapSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nstream"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("pipe")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("stdout"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h2",{attrs:{id:"v8-getheapstatistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-getheapstatistics"}},[e._v("#")]),e._v(" v8.getHeapStatistics()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {Object}")])]),e._v(" "),a("p",[e._v("Returns an object with the following properties:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("total_heap_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("total_heap_size_executable")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("total_physical_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("total_available_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("used_heap_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("heap_size_limit")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("malloced_memory")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("peak_malloced_memory")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("does_zap_garbage")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("number_of_native_contexts")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("number_of_detached_contexts")]),e._v(" {number}")])]),e._v(" "),a("p",[a("code",[e._v("does_zap_garbage")]),e._v(" is a 0/1 boolean, which signifies whether the\n"),a("code",[e._v("--zap_code_space")]),e._v(" option is enabled or not. This makes V8 overwrite heap\ngarbage with a bit pattern. The RSS footprint (resident memory set) gets bigger\nbecause it continuously touches all heap pages and that makes them less likely\nto get swapped out by the operating system.")]),e._v(" "),a("p",[a("code",[e._v("number_of_native_contexts")]),e._v(" The value of native_context is the number of the\ntop-level contexts currently active. Increase of this number over time indicates\na memory leak.")]),e._v(" "),a("p",[a("code",[e._v("number_of_detached_contexts")]),e._v(" The value of detached_context is the number\nof contexts that were detached and not yet garbage collected. This number\nbeing non-zero indicates a potential memory leak.")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  total_heap_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("7326976")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  total_heap_size_executable"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("4194304")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  total_physical_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("7326976")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  total_available_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1152656")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  used_heap_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("3476208")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  heap_size_limit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1535115264")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  malloced_memory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("16384")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  peak_malloced_memory"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1127496")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  does_zap_garbage"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  number_of_native_contexts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  number_of_detached_contexts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"v8-getheapcodestatistics"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-getheapcodestatistics"}},[e._v("#")]),e._v(" v8.getHeapCodeStatistics()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {Object}")])]),e._v(" "),a("p",[e._v("Returns an object with the following properties:")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("code_and_metadata_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("bytecode_and_metadata_size")]),e._v(" {number}")]),e._v(" "),a("li",[a("code",[e._v("external_script_source_size")]),e._v(" {number}")])]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  code_and_metadata_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("212208")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  bytecode_and_metadata_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("161368")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  external_script_source_size"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("1410794")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"v8-setflagsfromstring-flags"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-setflagsfromstring-flags"}},[e._v("#")]),e._v(" v8.setFlagsFromString(flags)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("flags")]),e._v(" {string}")])]),e._v(" "),a("p",[e._v("The "),a("code",[e._v("v8.setFlagsFromString()")]),e._v(" method can be used to programmatically set\nV8 command line flags. This method should be used with care. Changing settings\nafter the VM has started may result in unpredictable behavior, including\ncrashes and data loss; or it may simply do nothing.")]),e._v(" "),a("p",[e._v("The V8 options available for a version of Node.js may be determined by running\n"),a("code",[e._v("node --v8-options")]),e._v(".")]),e._v(" "),a("p",[e._v("Usage:")]),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Print GC events to stdout for one minute.")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" v8 "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'v8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nv8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("setFlagsFromString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'--trace_gc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("setTimeout")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" v8"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("setFlagsFromString")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'--notrace_gc'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[e._v("60e3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),a("h2",{attrs:{id:"v8-writeheapsnapshot-filename"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-writeheapsnapshot-filename"}},[e._v("#")]),e._v(" v8.writeHeapSnapshot([filename])")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("filename")]),e._v(" {string} The file path where the V8 heap snapshot is to be\nsaved. If not specified, a file name with the pattern\n"),a("code",[e._v("'Heap-${yyyymmdd}-${hhmmss}-${pid}-${thread_id}.heapsnapshot'")]),e._v(" will be\ngenerated, where "),a("code",[e._v("{pid}")]),e._v(" will be the PID of the Node.js process,\n"),a("code",[e._v("{thread_id}")]),e._v(" will be "),a("code",[e._v("0")]),e._v(" when "),a("code",[e._v("writeHeapSnapshot()")]),e._v(" is called from\nthe main Node.js thread or the id of a worker thread.")]),e._v(" "),a("li",[e._v("Returns: {string} The filename where the snapshot was saved.")])]),e._v(" "),a("p",[e._v("Generates a snapshot of the current V8 heap and writes it to a JSON\nfile. This file is intended to be used with tools such as Chrome\nDevTools. The JSON schema is undocumented and specific to the V8\nengine, and may change from one version of V8 to the next.")]),e._v(" "),a("p",[e._v("A heap snapshot is specific to a single V8 isolate. When using\n"),a("router-link",{attrs:{to:"/node/worker_threads.html"}},[e._v("Worker Threads")]),e._v(", a heap snapshot generated from the main thread will\nnot contain any information about the workers, and vice versa.")],1),e._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" writeHeapSnapshot "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'v8'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  Worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  isMainThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  parentPort\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'worker_threads'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("isMainThread"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" worker "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Worker")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__filename"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n  worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("filename")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("worker heapdump: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("${")]),e._v("filename"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Now get a heapdump for the main thread.")]),e._v("\n    console"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("main thread heapdump: ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("${")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("writeHeapSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("}")])]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n  "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Tell the worker to create a heapdump.")]),e._v("\n  worker"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'heapdump'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("else")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  parentPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("once")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'message'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("message")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("if")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("message "),a("span",{pre:!0,attrs:{class:"token operator"}},[e._v("===")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[e._v("'heapdump'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Generate a heapdump for the worker")]),e._v("\n      "),a("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// and return the filename to the parent.")]),e._v("\n      parentPort"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("postMessage")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token function"}},[e._v("writeHeapSnapshot")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),a("h2",{attrs:{id:"serialization-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serialization-api"}},[e._v("#")]),e._v(" Serialization API")]),e._v(" "),a("p",[e._v("The serialization API provides means of serializing JavaScript values in a way\nthat is compatible with the "),a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm",target:"_blank",rel:"noopener noreferrer"}},[e._v("HTML structured clone algorithm"),a("OutboundLink")],1),e._v(".\nThe format is backward-compatible (i.e. safe to store to disk).")]),e._v(" "),a("p",[e._v("This API is under development, and changes (including incompatible\nchanges to the API or wire format) may occur until this warning is removed.")]),e._v(" "),a("h3",{attrs:{id:"v8-serialize-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-serialize-value"}},[e._v("#")]),e._v(" v8.serialize(value)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("value")]),e._v(" {any}")]),e._v(" "),a("li",[e._v("Returns: {Buffer}")])]),e._v(" "),a("p",[e._v("Uses a "),a("a",{attrs:{href:"#v8_class_v8_defaultserializer"}},[a("code",[e._v("DefaultSerializer")])]),e._v(" to serialize "),a("code",[e._v("value")]),e._v(" into a buffer.")]),e._v(" "),a("h3",{attrs:{id:"v8-deserialize-buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#v8-deserialize-buffer"}},[e._v("#")]),e._v(" v8.deserialize(buffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("buffer")]),e._v(" {Buffer|TypedArray|DataView} A buffer returned by "),a("a",{attrs:{href:"#v8_v8_serialize_value"}},[a("code",[e._v("serialize()")])]),e._v(".")])]),e._v(" "),a("p",[e._v("Uses a "),a("a",{attrs:{href:"#v8_class_v8_defaultdeserializer"}},[a("code",[e._v("DefaultDeserializer")])]),e._v(" with default options to read a JS value\nfrom a buffer.")]),e._v(" "),a("h3",{attrs:{id:"class-v8-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-v8-serializer"}},[e._v("#")]),e._v(" class: v8.Serializer")]),e._v(" "),a("h4",{attrs:{id:"new-serializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-serializer"}},[e._v("#")]),e._v(" new Serializer()")]),e._v(" "),a("p",[e._v("Creates a new "),a("code",[e._v("Serializer")]),e._v(" object.")]),e._v(" "),a("h4",{attrs:{id:"serializer-writeheader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writeheader"}},[e._v("#")]),e._v(" serializer.writeHeader()")]),e._v(" "),a("p",[e._v("Writes out a header, which includes the serialization format version.")]),e._v(" "),a("h4",{attrs:{id:"serializer-writevalue-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writevalue-value"}},[e._v("#")]),e._v(" serializer.writeValue(value)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("value")]),e._v(" {any}")])]),e._v(" "),a("p",[e._v("Serializes a JavaScript value and adds the serialized representation to the\ninternal buffer.")]),e._v(" "),a("p",[e._v("This throws an error if "),a("code",[e._v("value")]),e._v(" cannot be serialized.")]),e._v(" "),a("h4",{attrs:{id:"serializer-releasebuffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-releasebuffer"}},[e._v("#")]),e._v(" serializer.releaseBuffer()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {Buffer}")])]),e._v(" "),a("p",[e._v("Returns the stored internal buffer. This serializer should not be used once\nthe buffer is released. Calling this method results in undefined behavior\nif a previous write has failed.")]),e._v(" "),a("h4",{attrs:{id:"serializer-transferarraybuffer-id-arraybuffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-transferarraybuffer-id-arraybuffer"}},[e._v("#")]),e._v(" serializer.transferArrayBuffer(id, arrayBuffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("id")]),e._v(" {integer} A 32-bit unsigned integer.")]),e._v(" "),a("li",[a("code",[e._v("arrayBuffer")]),e._v(" {ArrayBuffer} An "),a("code",[e._v("ArrayBuffer")]),e._v(" instance.")])]),e._v(" "),a("p",[e._v("Marks an "),a("code",[e._v("ArrayBuffer")]),e._v(" as having its contents transferred out of band.\nPass the corresponding "),a("code",[e._v("ArrayBuffer")]),e._v(" in the deserializing context to\n"),a("a",{attrs:{href:"#v8_deserializer_transferarraybuffer_id_arraybuffer"}},[a("code",[e._v("deserializer.transferArrayBuffer()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"serializer-writeuint32-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writeuint32-value"}},[e._v("#")]),e._v(" serializer.writeUint32(value)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("value")]),e._v(" {integer}")])]),e._v(" "),a("p",[e._v("Write a raw 32-bit unsigned integer.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_serializer_writehostobject_object"}},[a("code",[e._v("serializer._writeHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"serializer-writeuint64-hi-lo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writeuint64-hi-lo"}},[e._v("#")]),e._v(" serializer.writeUint64(hi, lo)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("hi")]),e._v(" {integer}")]),e._v(" "),a("li",[a("code",[e._v("lo")]),e._v(" {integer}")])]),e._v(" "),a("p",[e._v("Write a raw 64-bit unsigned integer, split into high and low 32-bit parts.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_serializer_writehostobject_object"}},[a("code",[e._v("serializer._writeHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"serializer-writedouble-value"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writedouble-value"}},[e._v("#")]),e._v(" serializer.writeDouble(value)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("value")]),e._v(" {number}")])]),e._v(" "),a("p",[e._v("Write a JS "),a("code",[e._v("number")]),e._v(" value.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_serializer_writehostobject_object"}},[a("code",[e._v("serializer._writeHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"serializer-writerawbytes-buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writerawbytes-buffer"}},[e._v("#")]),e._v(" serializer.writeRawBytes(buffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("buffer")]),e._v(" {Buffer|TypedArray|DataView}")])]),e._v(" "),a("p",[e._v("Write raw bytes into the serializer’s internal buffer. The deserializer\nwill require a way to compute the length of the buffer.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_serializer_writehostobject_object"}},[a("code",[e._v("serializer._writeHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"serializer-writehostobject-object"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-writehostobject-object"}},[e._v("#")]),e._v(" serializer._writeHostObject(object)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("object")]),e._v(" {Object}")])]),e._v(" "),a("p",[e._v("This method is called to write some kind of host object, i.e. an object created\nby native C++ bindings. If it is not possible to serialize "),a("code",[e._v("object")]),e._v(", a suitable\nexception should be thrown.")]),e._v(" "),a("p",[e._v("This method is not present on the "),a("code",[e._v("Serializer")]),e._v(" class itself but can be provided\nby subclasses.")]),e._v(" "),a("h4",{attrs:{id:"serializer-getdatacloneerror-message"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-getdatacloneerror-message"}},[e._v("#")]),e._v(" serializer._getDataCloneError(message)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("message")]),e._v(" {string}")])]),e._v(" "),a("p",[e._v("This method is called to generate error objects that will be thrown when an\nobject can not be cloned.")]),e._v(" "),a("p",[e._v("This method defaults to the "),a("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[a("code",[e._v("Error")])]),e._v(" constructor and can be overridden on\nsubclasses.")],1),e._v(" "),a("h4",{attrs:{id:"serializer-getsharedarraybufferid-sharedarraybuffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-getsharedarraybufferid-sharedarraybuffer"}},[e._v("#")]),e._v(" serializer._getSharedArrayBufferId(sharedArrayBuffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("sharedArrayBuffer")]),e._v(" {SharedArrayBuffer}")])]),e._v(" "),a("p",[e._v("This method is called when the serializer is going to serialize a\n"),a("code",[e._v("SharedArrayBuffer")]),e._v(" object. It must return an unsigned 32-bit integer ID for\nthe object, using the same ID if this "),a("code",[e._v("SharedArrayBuffer")]),e._v(" has already been\nserialized. When deserializing, this ID will be passed to\n"),a("a",{attrs:{href:"#v8_deserializer_transferarraybuffer_id_arraybuffer"}},[a("code",[e._v("deserializer.transferArrayBuffer()")])]),e._v(".")]),e._v(" "),a("p",[e._v("If the object cannot be serialized, an exception should be thrown.")]),e._v(" "),a("p",[e._v("This method is not present on the "),a("code",[e._v("Serializer")]),e._v(" class itself but can be provided\nby subclasses.")]),e._v(" "),a("h4",{attrs:{id:"serializer-settreatarraybufferviewsashostobjects-flag"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#serializer-settreatarraybufferviewsashostobjects-flag"}},[e._v("#")]),e._v(" serializer._setTreatArrayBufferViewsAsHostObjects(flag)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("flag")]),e._v(" {boolean} "),a("strong",[e._v("Default:")]),e._v(" "),a("code",[e._v("false")])])]),e._v(" "),a("p",[e._v("Indicate whether to treat "),a("code",[e._v("TypedArray")]),e._v(" and "),a("code",[e._v("DataView")]),e._v(" objects as\nhost objects, i.e. pass them to "),a("a",{attrs:{href:"#v8_serializer_writehostobject_object"}},[a("code",[e._v("serializer._writeHostObject()")])]),e._v(".")]),e._v(" "),a("h3",{attrs:{id:"class-v8-deserializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-v8-deserializer"}},[e._v("#")]),e._v(" class: v8.Deserializer")]),e._v(" "),a("h4",{attrs:{id:"new-deserializer-buffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#new-deserializer-buffer"}},[e._v("#")]),e._v(" new Deserializer(buffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("buffer")]),e._v(" {Buffer|TypedArray|DataView} A buffer returned by\n"),a("a",{attrs:{href:"#v8_serializer_releasebuffer"}},[a("code",[e._v("serializer.releaseBuffer()")])]),e._v(".")])]),e._v(" "),a("p",[e._v("Creates a new "),a("code",[e._v("Deserializer")]),e._v(" object.")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readheader"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readheader"}},[e._v("#")]),e._v(" deserializer.readHeader()")]),e._v(" "),a("p",[e._v("Reads and validates a header (including the format version).\nMay, for example, reject an invalid or unsupported wire format. In that case,\nan "),a("code",[e._v("Error")]),e._v(" is thrown.")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readvalue"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readvalue"}},[e._v("#")]),e._v(" deserializer.readValue()")]),e._v(" "),a("p",[e._v("Deserializes a JavaScript value from the buffer and returns it.")]),e._v(" "),a("h4",{attrs:{id:"deserializer-transferarraybuffer-id-arraybuffer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-transferarraybuffer-id-arraybuffer"}},[e._v("#")]),e._v(" deserializer.transferArrayBuffer(id, arrayBuffer)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("id")]),e._v(" {integer} A 32-bit unsigned integer.")]),e._v(" "),a("li",[a("code",[e._v("arrayBuffer")]),e._v(" {ArrayBuffer|SharedArrayBuffer} An "),a("code",[e._v("ArrayBuffer")]),e._v(" instance.")])]),e._v(" "),a("p",[e._v("Marks an "),a("code",[e._v("ArrayBuffer")]),e._v(" as having its contents transferred out of band.\nPass the corresponding "),a("code",[e._v("ArrayBuffer")]),e._v(" in the serializing context to\n"),a("a",{attrs:{href:"#v8_serializer_transferarraybuffer_id_arraybuffer"}},[a("code",[e._v("serializer.transferArrayBuffer()")])]),e._v(" (or return the "),a("code",[e._v("id")]),e._v(" from\n"),a("a",{attrs:{href:"#v8_serializer_getsharedarraybufferid_sharedarraybuffer"}},[a("code",[e._v("serializer._getSharedArrayBufferId()")])]),e._v(" in the case of "),a("code",[e._v("SharedArrayBuffer")]),e._v("s).")]),e._v(" "),a("h4",{attrs:{id:"deserializer-getwireformatversion"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-getwireformatversion"}},[e._v("#")]),e._v(" deserializer.getWireFormatVersion()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {integer}")])]),e._v(" "),a("p",[e._v("Reads the underlying wire format version. Likely mostly to be useful to\nlegacy code reading old wire format versions. May not be called before\n"),a("code",[e._v(".readHeader()")]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readuint32"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readuint32"}},[e._v("#")]),e._v(" deserializer.readUint32()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {integer}")])]),e._v(" "),a("p",[e._v("Read a raw 32-bit unsigned integer and return it.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_deserializer_readhostobject"}},[a("code",[e._v("deserializer._readHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readuint64"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readuint64"}},[e._v("#")]),e._v(" deserializer.readUint64()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {integer[]}")])]),e._v(" "),a("p",[e._v("Read a raw 64-bit unsigned integer and return it as an array "),a("code",[e._v("[hi, lo]")]),e._v("\nwith two 32-bit unsigned integer entries.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_deserializer_readhostobject"}},[a("code",[e._v("deserializer._readHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readdouble"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readdouble"}},[e._v("#")]),e._v(" deserializer.readDouble()")]),e._v(" "),a("ul",[a("li",[e._v("Returns: {number}")])]),e._v(" "),a("p",[e._v("Read a JS "),a("code",[e._v("number")]),e._v(" value.\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_deserializer_readhostobject"}},[a("code",[e._v("deserializer._readHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readrawbytes-length"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readrawbytes-length"}},[e._v("#")]),e._v(" deserializer.readRawBytes(length)")]),e._v(" "),a("ul",[a("li",[a("code",[e._v("length")]),e._v(" {integer}")]),e._v(" "),a("li",[e._v("Returns: {Buffer}")])]),e._v(" "),a("p",[e._v("Read raw bytes from the deserializer’s internal buffer. The "),a("code",[e._v("length")]),e._v(" parameter\nmust correspond to the length of the buffer that was passed to\n"),a("a",{attrs:{href:"#v8_serializer_writerawbytes_buffer"}},[a("code",[e._v("serializer.writeRawBytes()")])]),e._v(".\nFor use inside of a custom "),a("a",{attrs:{href:"#v8_deserializer_readhostobject"}},[a("code",[e._v("deserializer._readHostObject()")])]),e._v(".")]),e._v(" "),a("h4",{attrs:{id:"deserializer-readhostobject"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#deserializer-readhostobject"}},[e._v("#")]),e._v(" deserializer._readHostObject()")]),e._v(" "),a("p",[e._v("This method is called to read some kind of host object, i.e. an object that is\ncreated by native C++ bindings. If it is not possible to deserialize the data,\na suitable exception should be thrown.")]),e._v(" "),a("p",[e._v("This method is not present on the "),a("code",[e._v("Deserializer")]),e._v(" class itself but can be\nprovided by subclasses.")]),e._v(" "),a("h3",{attrs:{id:"class-v8-defaultserializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-v8-defaultserializer"}},[e._v("#")]),e._v(" class: v8.DefaultSerializer")]),e._v(" "),a("p",[e._v("A subclass of "),a("a",{attrs:{href:"#v8_class_v8_serializer"}},[a("code",[e._v("Serializer")])]),e._v(" that serializes "),a("code",[e._v("TypedArray")]),e._v("\n(in particular "),a("router-link",{attrs:{to:"/node/buffer.html"}},[a("code",[e._v("Buffer")])]),e._v(") and "),a("code",[e._v("DataView")]),e._v(" objects as host objects, and only\nstores the part of their underlying "),a("code",[e._v("ArrayBuffer")]),e._v("s that they are referring to.")],1),e._v(" "),a("h3",{attrs:{id:"class-v8-defaultdeserializer"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#class-v8-defaultdeserializer"}},[e._v("#")]),e._v(" class: v8.DefaultDeserializer")]),e._v(" "),a("p",[e._v("A subclass of "),a("a",{attrs:{href:"#v8_class_v8_deserializer"}},[a("code",[e._v("Deserializer")])]),e._v(" corresponding to the format written by\n"),a("a",{attrs:{href:"#v8_class_v8_defaultserializer"}},[a("code",[e._v("DefaultSerializer")])]),e._v(".")])])}),[],!1,null,null,null);t.default=r.exports}}]);