(window.webpackJsonp=window.webpackJsonp||[]).push([[36],{233:function(e,t,s){"use strict";s.r(t);var a=s(3),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#modules"}},[e._v("#")]),e._v(" Modules")]),e._v(" "),s("blockquote",[s("p",[e._v("Stability: 2 - Stable")])]),e._v(" "),s("p",[e._v("In the Node.js module system, each file is treated as a separate module. For\nexample, consider a file named "),s("code",[e._v("foo.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" circle "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./circle.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("The area of a circle of radius 4 is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("${")]),e._v("circle"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("area")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("On the first line, "),s("code",[e._v("foo.js")]),e._v(" loads the module "),s("code",[e._v("circle.js")]),e._v(" that is in the same\ndirectory as "),s("code",[e._v("foo.js")]),e._v(".")]),e._v(" "),s("p",[e._v("Here are the contents of "),s("code",[e._v("circle.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[e._v("PI")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" Math"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("area")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("r")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[e._v("PI")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" r "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("**")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("circumference")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("r")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[e._v("PI")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("*")]),e._v(" r"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("The module "),s("code",[e._v("circle.js")]),e._v(" has exported the functions "),s("code",[e._v("area()")]),e._v(" and\n"),s("code",[e._v("circumference()")]),e._v(". Functions and objects are added to the root of a module\nby specifying additional properties on the special "),s("code",[e._v("exports")]),e._v(" object.")]),e._v(" "),s("p",[e._v("Variables local to the module will be private, because the module is wrapped\nin a function by Node.js (see "),s("a",{attrs:{href:"#modules_the_module_wrapper"}},[e._v("module wrapper")]),e._v(").\nIn this example, the variable "),s("code",[e._v("PI")]),e._v(" is private to "),s("code",[e._v("circle.js")]),e._v(".")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("module.exports")]),e._v(" property can be assigned a new value (such as a function\nor object).")]),e._v(" "),s("p",[e._v("Below, "),s("code",[e._v("bar.js")]),e._v(" makes use of the "),s("code",[e._v("square")]),e._v(" module, which exports a Square class:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" Square "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./square.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" mySquare "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Square")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token template-string"}},[s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("The area of mySquare is ")]),s("span",{pre:!0,attrs:{class:"token interpolation"}},[s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("${")]),e._v("mySquare"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("area")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[e._v("}")])]),s("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[e._v("`")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("The "),s("code",[e._v("square")]),e._v(" module is defined in "),s("code",[e._v("square.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Assigning to exports will not modify module, must use module.exports")]),e._v("\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("class")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("Square")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("width")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" width"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("area")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("width "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("**")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("The module system is implemented in the "),s("code",[e._v("require('module')")]),e._v(" module.")]),e._v(" "),s("h2",{attrs:{id:"accessing-the-main-module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#accessing-the-main-module"}},[e._v("#")]),e._v(" Accessing the main module")]),e._v(" "),s("p",[e._v("When a file is run directly from Node.js, "),s("code",[e._v("require.main")]),e._v(" is set to its\n"),s("code",[e._v("module")]),e._v(". That means that it is possible to determine whether a file has been\nrun directly by testing "),s("code",[e._v("require.main === module")]),e._v(".")]),e._v(" "),s("p",[e._v("For a file "),s("code",[e._v("foo.js")]),e._v(", this will be "),s("code",[e._v("true")]),e._v(" if run via "),s("code",[e._v("node foo.js")]),e._v(", but\n"),s("code",[e._v("false")]),e._v(" if run by "),s("code",[e._v("require('./foo')")]),e._v(".")]),e._v(" "),s("p",[e._v("Because "),s("code",[e._v("module")]),e._v(" provides a "),s("code",[e._v("filename")]),e._v(" property (normally equivalent to\n"),s("code",[e._v("__filename")]),e._v("), the entry point of the current application can be obtained\nby checking "),s("code",[e._v("require.main.filename")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"addenda-package-manager-tips"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#addenda-package-manager-tips"}},[e._v("#")]),e._v(" Addenda: Package Manager Tips")]),e._v(" "),s("p",[e._v("The semantics of Node.js's "),s("code",[e._v("require()")]),e._v(" function were designed to be general\nenough to support reasonable directory structures. Package manager programs\nsuch as "),s("code",[e._v("dpkg")]),e._v(", "),s("code",[e._v("rpm")]),e._v(", and "),s("code",[e._v("npm")]),e._v(" will hopefully find it possible to build\nnative packages from Node.js modules without modification.")]),e._v(" "),s("p",[e._v("Below we give a suggested directory structure that could work:")]),e._v(" "),s("p",[e._v("Let's say that we wanted to have the folder at\n"),s("code",[e._v("/usr/lib/node/<some-package>/<some-version>")]),e._v(" hold the contents of a\nspecific version of a package.")]),e._v(" "),s("p",[e._v("Packages can depend on one another. In order to install package "),s("code",[e._v("foo")]),e._v(", it\nmay be necessary to install a specific version of package "),s("code",[e._v("bar")]),e._v(". The "),s("code",[e._v("bar")]),e._v("\npackage may itself have dependencies, and in some cases, these may even collide\nor form cyclic dependencies.")]),e._v(" "),s("p",[e._v("Since Node.js looks up the "),s("code",[e._v("realpath")]),e._v(" of any modules it loads (that is,\nresolves symlinks), and then looks for their dependencies in the "),s("code",[e._v("node_modules")]),e._v("\nfolders as described "),s("a",{attrs:{href:"#modules_loading_from_node_modules_folders"}},[e._v("here")]),e._v(", this\nsituation is very simple to resolve with the following architecture:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("/usr/lib/node/foo/1.2.3/")]),e._v(": Contents of the "),s("code",[e._v("foo")]),e._v(" package, version 1.2.3.")]),e._v(" "),s("li",[s("code",[e._v("/usr/lib/node/bar/4.3.2/")]),e._v(": Contents of the "),s("code",[e._v("bar")]),e._v(" package that "),s("code",[e._v("foo")]),e._v(" depends\non.")]),e._v(" "),s("li",[s("code",[e._v("/usr/lib/node/foo/1.2.3/node_modules/bar")]),e._v(": Symbolic link to\n"),s("code",[e._v("/usr/lib/node/bar/4.3.2/")]),e._v(".")]),e._v(" "),s("li",[s("code",[e._v("/usr/lib/node/bar/4.3.2/node_modules/*")]),e._v(": Symbolic links to the packages that\n"),s("code",[e._v("bar")]),e._v(" depends on.")])]),e._v(" "),s("p",[e._v("Thus, even if a cycle is encountered, or if there are dependency\nconflicts, every module will be able to get a version of its dependency\nthat it can use.")]),e._v(" "),s("p",[e._v("When the code in the "),s("code",[e._v("foo")]),e._v(" package does "),s("code",[e._v("require('bar')")]),e._v(", it will get the\nversion that is symlinked into "),s("code",[e._v("/usr/lib/node/foo/1.2.3/node_modules/bar")]),e._v(".\nThen, when the code in the "),s("code",[e._v("bar")]),e._v(" package calls "),s("code",[e._v("require('quux')")]),e._v(", it'll get\nthe version that is symlinked into\n"),s("code",[e._v("/usr/lib/node/bar/4.3.2/node_modules/quux")]),e._v(".")]),e._v(" "),s("p",[e._v("Furthermore, to make the module lookup process even more optimal, rather\nthan putting packages directly in "),s("code",[e._v("/usr/lib/node")]),e._v(", we could put them in\n"),s("code",[e._v("/usr/lib/node_modules/<name>/<version>")]),e._v(". Then Node.js will not bother\nlooking for missing dependencies in "),s("code",[e._v("/usr/node_modules")]),e._v(" or "),s("code",[e._v("/node_modules")]),e._v(".")]),e._v(" "),s("p",[e._v("In order to make modules available to the Node.js REPL, it might be useful to\nalso add the "),s("code",[e._v("/usr/lib/node_modules")]),e._v(" folder to the "),s("code",[e._v("$NODE_PATH")]),e._v(" environment\nvariable. Since the module lookups using "),s("code",[e._v("node_modules")]),e._v(" folders are all\nrelative, and based on the real path of the files making the calls to\n"),s("code",[e._v("require()")]),e._v(", the packages themselves can be anywhere.")]),e._v(" "),s("h2",{attrs:{id:"addenda-the-mjs-extension"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#addenda-the-mjs-extension"}},[e._v("#")]),e._v(" Addenda: The .mjs extension")]),e._v(" "),s("p",[e._v("It is not possible to "),s("code",[e._v("require()")]),e._v(" files that have the "),s("code",[e._v(".mjs")]),e._v(" extension.\nAttempting to do so will throw "),s("router-link",{attrs:{to:"/node/errors.html#errors_err_require_esm"}},[e._v("an error")]),e._v(". The "),s("code",[e._v(".mjs")]),e._v(" extension is\nreserved for "),s("router-link",{attrs:{to:"/node/esm.html"}},[e._v("ECMAScript Modules")]),e._v(" which cannot be loaded via "),s("code",[e._v("require()")]),e._v(".\nSee "),s("router-link",{attrs:{to:"/node/esm.html"}},[e._v("ECMAScript Modules")]),e._v(" for more details.")],1),e._v(" "),s("h2",{attrs:{id:"all-together"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#all-together"}},[e._v("#")]),e._v(" All Together...")]),e._v(" "),s("p",[e._v("To get the exact filename that will be loaded when "),s("code",[e._v("require()")]),e._v(" is called, use\nthe "),s("code",[e._v("require.resolve()")]),e._v(" function.")]),e._v(" "),s("p",[e._v("Putting together all of the above, here is the high-level algorithm\nin pseudocode of what "),s("code",[e._v("require()")]),e._v(" does:")]),e._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('require(X) from module at path Y\n1. If X is a core module,\n   a. return the core module\n   b. STOP\n2. If X begins with \'/\'\n   a. set Y to be the filesystem root\n3. If X begins with \'./\' or \'/\' or \'../\'\n   a. LOAD_AS_FILE(Y + X)\n   b. LOAD_AS_DIRECTORY(Y + X)\n   c. THROW "not found"\n4. LOAD_NODE_MODULES(X, dirname(Y))\n5. LOAD_SELF_REFERENCE(X, dirname(Y))\n6. THROW "not found"\n\nLOAD_AS_FILE(X)\n1. If X is a file, load X as JavaScript text.  STOP\n2. If X.js is a file, load X.js as JavaScript text.  STOP\n3. If X.json is a file, parse X.json to a JavaScript Object.  STOP\n4. If X.node is a file, load X.node as binary addon.  STOP\n\nLOAD_INDEX(X)\n1. If X/index.js is a file, load X/index.js as JavaScript text.  STOP\n2. If X/index.json is a file, parse X/index.json to a JavaScript object. STOP\n3. If X/index.node is a file, load X/index.node as binary addon.  STOP\n\nLOAD_AS_DIRECTORY(X)\n1. If X/package.json is a file,\n   a. Parse X/package.json, and look for "main" field.\n   b. If "main" is a falsy value, GOTO 2.\n   c. let M = X + (json main field)\n   d. LOAD_AS_FILE(M)\n   e. LOAD_INDEX(M)\n   f. LOAD_INDEX(X) DEPRECATED\n   g. THROW "not found"\n2. LOAD_INDEX(X)\n\nLOAD_NODE_MODULES(X, START)\n1. let DIRS = NODE_MODULES_PATHS(START)\n2. for each DIR in DIRS:\n   a. LOAD_AS_FILE(DIR/X)\n   b. LOAD_AS_DIRECTORY(DIR/X)\n\nNODE_MODULES_PATHS(START)\n1. let PARTS = path split(START)\n2. let I = count of PARTS - 1\n3. let DIRS = [GLOBAL_FOLDERS]\n4. while I >= 0,\n   a. if PARTS[I] = "node_modules" CONTINUE\n   b. DIR = path join(PARTS[0 .. I] + "node_modules")\n   c. DIRS = DIRS + DIR\n   d. let I = I - 1\n5. return DIRS\n\nLOAD_SELF_REFERENCE(X, START)\n1. Find the closest package scope to START.\n2. If no scope was found, throw "not found".\n3. If the name in `package.json` isn\'t a prefix of X, throw "not found".\n4. Otherwise, resolve the remainder of X relative to this package as if it\n   was loaded via `LOAD_NODE_MODULES` with a name in `package.json`.\n')])])]),s("p",[e._v("Node.js allows packages loaded via\n"),s("code",[e._v("LOAD_NODE_MODULES")]),e._v(" to explicitly declare which file paths to expose and how\nthey should be interpreted. This expands on the control packages already had\nusing the "),s("code",[e._v("main")]),e._v(" field.")]),e._v(" "),s("p",[e._v("With this feature enabled, the "),s("code",[e._v("LOAD_NODE_MODULES")]),e._v(" changes are:")]),e._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v('LOAD_NODE_MODULES(X, START)\n1. let DIRS = NODE_MODULES_PATHS(START)\n2. for each DIR in DIRS:\n   a. let FILE_PATH = RESOLVE_BARE_SPECIFIER(DIR, X)\n   b. LOAD_AS_FILE(FILE_PATH)\n   c. LOAD_AS_DIRECTORY(FILE_PATH)\n\nRESOLVE_BARE_SPECIFIER(DIR, X)\n1. Try to interpret X as a combination of name and subpath where the name\n   may have a @scope/ prefix and the subpath begins with a slash (`/`).\n2. If X matches this pattern and DIR/name/package.json is a file:\n   a. Parse DIR/name/package.json, and look for "exports" field.\n   b. If "exports" is null or undefined, GOTO 3.\n   c. Find the longest key in "exports" that the subpath starts with.\n   d. If no such key can be found, throw "not found".\n   e. let RESOLVED_URL =\n        PACKAGE_EXPORTS_TARGET_RESOLVE(pathToFileURL(DIR/name), exports[key],\n        subpath.slice(key.length)), as defined in the esm resolver.\n   f. return fileURLToPath(RESOLVED_URL)\n3. return DIR/X\n')])])]),s("p",[s("code",[e._v('"exports"')]),e._v(' is only honored when loading a package "name" as defined above. Any\n'),s("code",[e._v('"exports"')]),e._v(" values within nested directories and packages must be declared by\nthe "),s("code",[e._v("package.json")]),e._v(' responsible for the "name".')]),e._v(" "),s("h2",{attrs:{id:"caching"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#caching"}},[e._v("#")]),e._v(" Caching")]),e._v(" "),s("p",[e._v("Modules are cached after the first time they are loaded. This means (among other\nthings) that every call to "),s("code",[e._v("require('foo')")]),e._v(" will get exactly the same object\nreturned, if it would resolve to the same file.")]),e._v(" "),s("p",[e._v("Provided "),s("code",[e._v("require.cache")]),e._v(" is not modified, multiple calls to "),s("code",[e._v("require('foo')")]),e._v('\nwill not cause the module code to be executed multiple times. This is an\nimportant feature. With it, "partially done" objects can be returned, thus\nallowing transitive dependencies to be loaded even when they would cause cycles.')]),e._v(" "),s("p",[e._v("To have a module execute code multiple times, export a function, and call that\nfunction.")]),e._v(" "),s("h3",{attrs:{id:"module-caching-caveats"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-caching-caveats"}},[e._v("#")]),e._v(" Module Caching Caveats")]),e._v(" "),s("p",[e._v("Modules are cached based on their resolved filename. Since modules may resolve\nto a different filename based on the location of the calling module (loading\nfrom "),s("code",[e._v("node_modules")]),e._v(" folders), it is not a "),s("em",[e._v("guarantee")]),e._v(" that "),s("code",[e._v("require('foo')")]),e._v(" will\nalways return the exact same object, if it would resolve to different files.")]),e._v(" "),s("p",[e._v("Additionally, on case-insensitive file systems or operating systems, different\nresolved filenames can point to the same file, but the cache will still treat\nthem as different modules and will reload the file multiple times. For example,\n"),s("code",[e._v("require('./foo')")]),e._v(" and "),s("code",[e._v("require('./FOO')")]),e._v(" return two different objects,\nirrespective of whether or not "),s("code",[e._v("./foo")]),e._v(" and "),s("code",[e._v("./FOO")]),e._v(" are the same file.")]),e._v(" "),s("h2",{attrs:{id:"core-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#core-modules"}},[e._v("#")]),e._v(" Core Modules")]),e._v(" "),s("p",[e._v("Node.js has several modules compiled into the binary. These modules are\ndescribed in greater detail elsewhere in this documentation.")]),e._v(" "),s("p",[e._v("The core modules are defined within Node.js's source and are located in the\n"),s("code",[e._v("lib/")]),e._v(" folder.")]),e._v(" "),s("p",[e._v("Core modules are always preferentially loaded if their identifier is\npassed to "),s("code",[e._v("require()")]),e._v(". For instance, "),s("code",[e._v("require('http')")]),e._v(" will always\nreturn the built in HTTP module, even if there is a file by that name.")]),e._v(" "),s("h2",{attrs:{id:"cycles"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#cycles"}},[e._v("#")]),e._v(" Cycles")]),e._v(" "),s("p",[e._v("When there are circular "),s("code",[e._v("require()")]),e._v(" calls, a module might not have finished\nexecuting when it is returned.")]),e._v(" "),s("p",[e._v("Consider this situation:")]),e._v(" "),s("p",[s("code",[e._v("a.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'a starting'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./b.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'in a, b.done = %j'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'a done'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("code",[e._v("b.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'b starting'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./a.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'in b, a.done = %j'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nexports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'b done'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("code",[e._v("main.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'main starting'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./a.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" b "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./b.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'in main, a.done = %j, b.done = %j'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" b"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("done"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("When "),s("code",[e._v("main.js")]),e._v(" loads "),s("code",[e._v("a.js")]),e._v(", then "),s("code",[e._v("a.js")]),e._v(" in turn loads "),s("code",[e._v("b.js")]),e._v(". At that\npoint, "),s("code",[e._v("b.js")]),e._v(" tries to load "),s("code",[e._v("a.js")]),e._v(". In order to prevent an infinite\nloop, an "),s("strong",[e._v("unfinished copy")]),e._v(" of the "),s("code",[e._v("a.js")]),e._v(" exports object is returned to the\n"),s("code",[e._v("b.js")]),e._v(" module. "),s("code",[e._v("b.js")]),e._v(" then finishes loading, and its "),s("code",[e._v("exports")]),e._v(" object is\nprovided to the "),s("code",[e._v("a.js")]),e._v(" module.")]),e._v(" "),s("p",[e._v("By the time "),s("code",[e._v("main.js")]),e._v(" has loaded both modules, they're both finished.\nThe output of this program would thus be:")]),e._v(" "),s("div",{staticClass:"language-console extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("$ node main.js\nmain starting\na starting\nb starting\nin b, a.done = false\nb done\nin a, b.done = true\na done\nin main, a.done = true, b.done = true\n")])])]),s("p",[e._v("Careful planning is required to allow cyclic module dependencies to work\ncorrectly within an application.")]),e._v(" "),s("h2",{attrs:{id:"file-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#file-modules"}},[e._v("#")]),e._v(" File Modules")]),e._v(" "),s("p",[e._v("If the exact filename is not found, then Node.js will attempt to load the\nrequired filename with the added extensions: "),s("code",[e._v(".js")]),e._v(", "),s("code",[e._v(".json")]),e._v(", and finally\n"),s("code",[e._v(".node")]),e._v(".")]),e._v(" "),s("p",[s("code",[e._v(".js")]),e._v(" files are interpreted as JavaScript text files, and "),s("code",[e._v(".json")]),e._v(" files are\nparsed as JSON text files. "),s("code",[e._v(".node")]),e._v(" files are interpreted as compiled addon\nmodules loaded with "),s("code",[e._v("process.dlopen()")]),e._v(".")]),e._v(" "),s("p",[e._v("A required module prefixed with "),s("code",[e._v("'/'")]),e._v(" is an absolute path to the file. For\nexample, "),s("code",[e._v("require('/home/marco/foo.js')")]),e._v(" will load the file at\n"),s("code",[e._v("/home/marco/foo.js")]),e._v(".")]),e._v(" "),s("p",[e._v("A required module prefixed with "),s("code",[e._v("'./'")]),e._v(" is relative to the file calling\n"),s("code",[e._v("require()")]),e._v(". That is, "),s("code",[e._v("circle.js")]),e._v(" must be in the same directory as "),s("code",[e._v("foo.js")]),e._v(" for\n"),s("code",[e._v("require('./circle')")]),e._v(" to find it.")]),e._v(" "),s("p",[e._v("Without a leading "),s("code",[e._v("'/'")]),e._v(", "),s("code",[e._v("'./'")]),e._v(", or "),s("code",[e._v("'../'")]),e._v(" to indicate a file, the module must\neither be a core module or is loaded from a "),s("code",[e._v("node_modules")]),e._v(" folder.")]),e._v(" "),s("p",[e._v("If the given path does not exist, "),s("code",[e._v("require()")]),e._v(" will throw an "),s("router-link",{attrs:{to:"/node/errors.html#errors_class_error"}},[s("code",[e._v("Error")])]),e._v(" with its\n"),s("code",[e._v("code")]),e._v(" property set to "),s("code",[e._v("'MODULE_NOT_FOUND'")]),e._v(".")],1),e._v(" "),s("h2",{attrs:{id:"folders-as-modules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#folders-as-modules"}},[e._v("#")]),e._v(" Folders as Modules")]),e._v(" "),s("p",[e._v("It is convenient to organize programs and libraries into self-contained\ndirectories, and then provide a single entry point to those directories.\nThere are three ways in which a folder may be passed to "),s("code",[e._v("require()")]),e._v(" as\nan argument.")]),e._v(" "),s("p",[e._v("The first is to create a "),s("code",[e._v("package.json")]),e._v(" file in the root of the folder,\nwhich specifies a "),s("code",[e._v("main")]),e._v(" module. An example "),s("code",[e._v("package.json")]),e._v(" file might\nlook like this:")]),e._v(" "),s("div",{staticClass:"language-json extra-class"},[s("pre",{pre:!0,attrs:{class:"language-json"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"name"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"some-library"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token property"}},[e._v('"main"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v('"./lib/some-library.js"')]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("p",[e._v("If this was in a folder at "),s("code",[e._v("./some-library")]),e._v(", then\n"),s("code",[e._v("require('./some-library')")]),e._v(" would attempt to load\n"),s("code",[e._v("./some-library/lib/some-library.js")]),e._v(".")]),e._v(" "),s("p",[e._v("This is the extent of Node.js's awareness of "),s("code",[e._v("package.json")]),e._v(" files.")]),e._v(" "),s("p",[e._v("If there is no "),s("code",[e._v("package.json")]),e._v(" file present in the directory, or if the\n"),s("code",[e._v("'main'")]),e._v(" entry is missing or cannot be resolved, then Node.js\nwill attempt to load an "),s("code",[e._v("index.js")]),e._v(" or "),s("code",[e._v("index.node")]),e._v(" file out of that\ndirectory. For example, if there was no "),s("code",[e._v("package.json")]),e._v(" file in the above\nexample, then "),s("code",[e._v("require('./some-library')")]),e._v(" would attempt to load:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("./some-library/index.js")])]),e._v(" "),s("li",[s("code",[e._v("./some-library/index.node")])])]),e._v(" "),s("p",[e._v("If these attempts fail, then Node.js will report the entire module as missing\nwith the default error:")]),e._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[e._v("Error: Cannot find module 'some-library'\n")])])]),s("h2",{attrs:{id:"loading-from-node-modules-folders"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading-from-node-modules-folders"}},[e._v("#")]),e._v(" Loading from "),s("code",[e._v("node_modules")]),e._v(" Folders")]),e._v(" "),s("p",[e._v("If the module identifier passed to "),s("code",[e._v("require()")]),e._v(" is not a\n"),s("a",{attrs:{href:"#modules_core_modules"}},[e._v("core")]),e._v(" module, and does not begin with "),s("code",[e._v("'/'")]),e._v(", "),s("code",[e._v("'../'")]),e._v(", or\n"),s("code",[e._v("'./'")]),e._v(", then Node.js starts at the parent directory of the current module, and\nadds "),s("code",[e._v("/node_modules")]),e._v(", and attempts to load the module from that location.\nNode.js will not append "),s("code",[e._v("node_modules")]),e._v(" to a path already ending in\n"),s("code",[e._v("node_modules")]),e._v(".")]),e._v(" "),s("p",[e._v("If it is not found there, then it moves to the parent directory, and so\non, until the root of the file system is reached.")]),e._v(" "),s("p",[e._v("For example, if the file at "),s("code",[e._v("'/home/ry/projects/foo.js'")]),e._v(" called\n"),s("code",[e._v("require('bar.js')")]),e._v(", then Node.js would look in the following locations, in\nthis order:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("/home/ry/projects/node_modules/bar.js")])]),e._v(" "),s("li",[s("code",[e._v("/home/ry/node_modules/bar.js")])]),e._v(" "),s("li",[s("code",[e._v("/home/node_modules/bar.js")])]),e._v(" "),s("li",[s("code",[e._v("/node_modules/bar.js")])])]),e._v(" "),s("p",[e._v("This allows programs to localize their dependencies, so that they do not\nclash.")]),e._v(" "),s("p",[e._v("It is possible to require specific files or sub modules distributed with a\nmodule by including a path suffix after the module name. For instance\n"),s("code",[e._v("require('example-module/path/to/file')")]),e._v(" would resolve "),s("code",[e._v("path/to/file")]),e._v("\nrelative to where "),s("code",[e._v("example-module")]),e._v(" is located. The suffixed path follows the\nsame module resolution semantics.")]),e._v(" "),s("h2",{attrs:{id:"loading-from-the-global-folders"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#loading-from-the-global-folders"}},[e._v("#")]),e._v(" Loading from the global folders")]),e._v(" "),s("p",[e._v("If the "),s("code",[e._v("NODE_PATH")]),e._v(" environment variable is set to a colon-delimited list\nof absolute paths, then Node.js will search those paths for modules if they\nare not found elsewhere.")]),e._v(" "),s("p",[e._v("On Windows, "),s("code",[e._v("NODE_PATH")]),e._v(" is delimited by semicolons ("),s("code",[e._v(";")]),e._v(") instead of colons.")]),e._v(" "),s("p",[s("code",[e._v("NODE_PATH")]),e._v(" was originally created to support loading modules from\nvarying paths before the current "),s("a",{attrs:{href:"#modules_all_together"}},[e._v("module resolution")]),e._v(" algorithm was defined.")]),e._v(" "),s("p",[s("code",[e._v("NODE_PATH")]),e._v(" is still supported, but is less necessary now that the Node.js\necosystem has settled on a convention for locating dependent modules.\nSometimes deployments that rely on "),s("code",[e._v("NODE_PATH")]),e._v(" show surprising behavior\nwhen people are unaware that "),s("code",[e._v("NODE_PATH")]),e._v(" must be set. Sometimes a\nmodule's dependencies change, causing a different version (or even a\ndifferent module) to be loaded as the "),s("code",[e._v("NODE_PATH")]),e._v(" is searched.")]),e._v(" "),s("p",[e._v("Additionally, Node.js will search in the following list of GLOBAL_FOLDERS:")]),e._v(" "),s("ul",[s("li",[e._v("1: "),s("code",[e._v("$HOME/.node_modules")])]),e._v(" "),s("li",[e._v("2: "),s("code",[e._v("$HOME/.node_libraries")])]),e._v(" "),s("li",[e._v("3: "),s("code",[e._v("$PREFIX/lib/node")])])]),e._v(" "),s("p",[e._v("Where "),s("code",[e._v("$HOME")]),e._v(" is the user's home directory, and "),s("code",[e._v("$PREFIX")]),e._v(" is Node.js's\nconfigured "),s("code",[e._v("node_prefix")]),e._v(".")]),e._v(" "),s("p",[e._v("These are mostly for historic reasons.")]),e._v(" "),s("p",[e._v("It is strongly encouraged to place dependencies in the local "),s("code",[e._v("node_modules")]),e._v("\nfolder. These will be loaded faster, and more reliably.")]),e._v(" "),s("h2",{attrs:{id:"the-module-wrapper"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-module-wrapper"}},[e._v("#")]),e._v(" The module wrapper")]),e._v(" "),s("p",[e._v("Before a module's code is executed, Node.js will wrap it with a function\nwrapper that looks like the following:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" __filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" __dirname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Module code actually lives in here")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("By doing this, Node.js achieves a few things:")]),e._v(" "),s("ul",[s("li",[e._v("It keeps top-level variables (defined with "),s("code",[e._v("var")]),e._v(", "),s("code",[e._v("const")]),e._v(" or "),s("code",[e._v("let")]),e._v(") scoped to\nthe module rather than the global object.")]),e._v(" "),s("li",[e._v("It helps to provide some global-looking variables that are actually specific\nto the module, such as:\n"),s("ul",[s("li",[e._v("The "),s("code",[e._v("module")]),e._v(" and "),s("code",[e._v("exports")]),e._v(" objects that the implementor can use to export\nvalues from the module.")]),e._v(" "),s("li",[e._v("The convenience variables "),s("code",[e._v("__filename")]),e._v(" and "),s("code",[e._v("__dirname")]),e._v(", containing the\nmodule's absolute filename and directory path.")])])])]),e._v(" "),s("h2",{attrs:{id:"the-module-scope"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-module-scope"}},[e._v("#")]),e._v(" The module scope")]),e._v(" "),s("h3",{attrs:{id:"dirname"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dirname"}},[e._v("#")]),e._v(" __dirname")]),e._v(" "),s("ul",[s("li",[e._v("{string}")])]),e._v(" "),s("p",[e._v("The directory name of the current module. This is the same as the\n"),s("router-link",{attrs:{to:"/node/path.html#path_path_dirname_path"}},[s("code",[e._v("path.dirname()")])]),e._v(" of the "),s("a",{attrs:{href:"#modules_filename"}},[s("code",[e._v("__filename")])]),e._v(".")],1),e._v(" "),s("p",[e._v("Example: running "),s("code",[e._v("node example.js")]),e._v(" from "),s("code",[e._v("/Users/mjr")])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Prints: /Users/mjr")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("path"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("dirname")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Prints: /Users/mjr")]),e._v("\n")])])]),s("h3",{attrs:{id:"filename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#filename"}},[e._v("#")]),e._v(" __filename")]),e._v(" "),s("ul",[s("li",[e._v("{string}")])]),e._v(" "),s("p",[e._v("The file name of the current module. This is the current module file's absolute\npath with symlinks resolved.")]),e._v(" "),s("p",[e._v("For a main program this is not necessarily the same as the file name used in the\ncommand line.")]),e._v(" "),s("p",[e._v("See "),s("a",{attrs:{href:"#modules_dirname"}},[s("code",[e._v("__dirname")])]),e._v(" for the directory name of the current module.")]),e._v(" "),s("p",[e._v("Examples:")]),e._v(" "),s("p",[e._v("Running "),s("code",[e._v("node example.js")]),e._v(" from "),s("code",[e._v("/Users/mjr")])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Prints: /Users/mjr/example.js")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("__dirname"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Prints: /Users/mjr")]),e._v("\n")])])]),s("p",[e._v("Given two modules: "),s("code",[e._v("a")]),e._v(" and "),s("code",[e._v("b")]),e._v(", where "),s("code",[e._v("b")]),e._v(" is a dependency of\n"),s("code",[e._v("a")]),e._v(" and there is a directory structure of:")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("/Users/mjr/app/a.js")])]),e._v(" "),s("li",[s("code",[e._v("/Users/mjr/app/node_modules/b/b.js")])])]),e._v(" "),s("p",[e._v("References to "),s("code",[e._v("__filename")]),e._v(" within "),s("code",[e._v("b.js")]),e._v(" will return\n"),s("code",[e._v("/Users/mjr/app/node_modules/b/b.js")]),e._v(" while references to "),s("code",[e._v("__filename")]),e._v(" within\n"),s("code",[e._v("a.js")]),e._v(" will return "),s("code",[e._v("/Users/mjr/app/a.js")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"exports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exports"}},[e._v("#")]),e._v(" exports")]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("A reference to the "),s("code",[e._v("module.exports")]),e._v(" that is shorter to type.\nSee the section about the "),s("a",{attrs:{href:"#modules_exports_shortcut"}},[e._v("exports shortcut")]),e._v(" for details on when to use\n"),s("code",[e._v("exports")]),e._v(" and when to use "),s("code",[e._v("module.exports")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"module"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module"}},[e._v("#")]),e._v(" module")]),e._v(" "),s("ul",[s("li",[e._v("{module}")])]),e._v(" "),s("p",[e._v("A reference to the current module, see the section about the\n"),s("a",{attrs:{href:"#modules_the_module_object"}},[s("code",[e._v("module")]),e._v(" object")]),e._v(". In particular, "),s("code",[e._v("module.exports")]),e._v(" is used for defining what\na module exports and makes available through "),s("code",[e._v("require()")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"require-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-id"}},[e._v("#")]),e._v(" require(id)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("id")]),e._v(" {string} module name or path")]),e._v(" "),s("li",[e._v("Returns: {any} exported module content")])]),e._v(" "),s("p",[e._v("Used to import modules, "),s("code",[e._v("JSON")]),e._v(", and local files. Modules can be imported\nfrom "),s("code",[e._v("node_modules")]),e._v(". Local modules and JSON files can be imported using\na relative path (e.g. "),s("code",[e._v("./")]),e._v(", "),s("code",[e._v("./foo")]),e._v(", "),s("code",[e._v("./bar/baz")]),e._v(", "),s("code",[e._v("../foo")]),e._v(") that will be\nresolved against the directory named by "),s("a",{attrs:{href:"#modules_dirname"}},[s("code",[e._v("__dirname")])]),e._v(" (if defined) or\nthe current working directory.")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Importing a local module:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" myLocalModule "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./path/myLocalModule'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Importing a JSON file:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" jsonData "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./path/filename.json'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Importing a module from node_modules or Node.js built-in module:")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" crypto "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'crypto'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h4",{attrs:{id:"require-cache"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-cache"}},[e._v("#")]),e._v(" require.cache")]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("Modules are cached in this object when they are required. By deleting a key\nvalue from this object, the next "),s("code",[e._v("require")]),e._v(" will reload the module.\nThis does not apply to "),s("router-link",{attrs:{to:"/node/addons.html"}},[e._v("native addons")]),e._v(", for which reloading will result in an\nerror.")],1),e._v(" "),s("p",[e._v("Adding or replacing entries is also possible. This cache is checked before\nnative modules and if a name matching a native module is added to the cache,\nno require call is\ngoing to receive the native module anymore. Use with care!")]),e._v(" "),s("h4",{attrs:{id:"require-extensions"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-extensions"}},[e._v("#")]),e._v(" require.extensions")]),e._v(" "),s("blockquote",[s("p",[e._v("Stability: 0 - Deprecated")])]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("Instruct "),s("code",[e._v("require")]),e._v(" on how to handle certain file extensions.")]),e._v(" "),s("p",[e._v("Process files with the extension "),s("code",[e._v(".sjs")]),e._v(" as "),s("code",[e._v(".js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("extensions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.sjs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("extensions"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("strong",[e._v("Deprecated.")]),e._v(" In the past, this list has been used to load non-JavaScript\nmodules into Node.js by compiling them on-demand. However, in practice, there\nare much better ways to do this, such as loading modules via some other Node.js\nprogram, or compiling them to JavaScript ahead of time.")]),e._v(" "),s("p",[e._v("Avoid using "),s("code",[e._v("require.extensions")]),e._v(". Use could cause subtle bugs and resolving the\nextensions gets slower with each registered extension.")]),e._v(" "),s("h4",{attrs:{id:"require-main"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-main"}},[e._v("#")]),e._v(" require.main")]),e._v(" "),s("ul",[s("li",[e._v("{module}")])]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("Module")]),e._v(" object representing the entry script loaded when the Node.js\nprocess launched.\nSee "),s("a",{attrs:{href:"#modules_accessing_the_main_module"}},[e._v('"Accessing the main module"')]),e._v(".")]),e._v(" "),s("p",[e._v("In "),s("code",[e._v("entry.js")]),e._v(" script:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("require"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("div",{staticClass:"language-sh extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sh"}},[s("code",[e._v("node entry.js\n")])])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("Module "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'.'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  parent"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  filename"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/absolute/path/to/entry.js'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  loaded"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  children"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n  paths"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v("\n   "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("[")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/absolute/path/to/node_modules'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n     "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/absolute/path/node_modules'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n     "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/absolute/node_modules'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v("\n     "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'/node_modules'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("]")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h4",{attrs:{id:"require-resolve-request-options"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-resolve-request-options"}},[e._v("#")]),e._v(" require.resolve(request[, options])")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("request")]),e._v(" {string} The module path to resolve.")]),e._v(" "),s("li",[s("code",[e._v("options")]),e._v(" {Object}\n"),s("ul",[s("li",[s("code",[e._v("paths")]),e._v(" {string[]} Paths to resolve module location from. If present, these\npaths are used instead of the default resolution paths, with the exception\nof "),s("a",{attrs:{href:"#modules_loading_from_the_global_folders"}},[e._v("GLOBAL_FOLDERS")]),e._v(" like "),s("code",[e._v("$HOME/.node_modules")]),e._v(", which are always\nincluded. Each of these paths is used as a starting point for\nthe module resolution algorithm, meaning that the "),s("code",[e._v("node_modules")]),e._v(" hierarchy\nis checked from this location.")])])]),e._v(" "),s("li",[e._v("Returns: {string}")])]),e._v(" "),s("p",[e._v("Use the internal "),s("code",[e._v("require()")]),e._v(" machinery to look up the location of a module,\nbut rather than loading the module, just return the resolved filename.")]),e._v(" "),s("h5",{attrs:{id:"require-resolve-paths-request"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#require-resolve-paths-request"}},[e._v("#")]),e._v(" require.resolve.paths(request)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("request")]),e._v(" {string} The module path whose lookup paths are being retrieved.")]),e._v(" "),s("li",[e._v("Returns: {string[]|null}")])]),e._v(" "),s("p",[e._v("Returns an array containing the paths searched during resolution of "),s("code",[e._v("request")]),e._v(" or\n"),s("code",[e._v("null")]),e._v(" if the "),s("code",[e._v("request")]),e._v(" string references a core module, for example "),s("code",[e._v("http")]),e._v(" or\n"),s("code",[e._v("fs")]),e._v(".")]),e._v(" "),s("h2",{attrs:{id:"the-module-object"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-module-object"}},[e._v("#")]),e._v(" The "),s("code",[e._v("module")]),e._v(" Object")]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("In each module, the "),s("code",[e._v("module")]),e._v(" free variable is a reference to the object\nrepresenting the current module. For convenience, "),s("code",[e._v("module.exports")]),e._v(" is\nalso accessible via the "),s("code",[e._v("exports")]),e._v(" module-global. "),s("code",[e._v("module")]),e._v(" is not actually\na global but rather local to each module.")]),e._v(" "),s("h3",{attrs:{id:"module-children"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-children"}},[e._v("#")]),e._v(" module.children")]),e._v(" "),s("ul",[s("li",[e._v("{module[]}")])]),e._v(" "),s("p",[e._v("The module objects required for the first time by this one.")]),e._v(" "),s("h3",{attrs:{id:"module-exports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-exports"}},[e._v("#")]),e._v(" module.exports")]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("module.exports")]),e._v(" object is created by the "),s("code",[e._v("Module")]),e._v(" system. Sometimes this is\nnot acceptable; many want their module to be an instance of some class. To do\nthis, assign the desired export object to "),s("code",[e._v("module.exports")]),e._v(". Assigning\nthe desired object to "),s("code",[e._v("exports")]),e._v(" will simply rebind the local "),s("code",[e._v("exports")]),e._v(" variable,\nwhich is probably not what is desired.")]),e._v(" "),s("p",[e._v("For example, suppose we were making a module called "),s("code",[e._v("a.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" EventEmitter "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'events'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nmodule"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("new")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[e._v("EventEmitter")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Do some work, and after some time emit")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// the 'ready' event from the module itself.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("emit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'ready'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("Then in another file we could do:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" a "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./a'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\na"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'ready'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'module \"a\" is ready'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("Assignment to "),s("code",[e._v("module.exports")]),e._v(" must be done immediately. It cannot be\ndone in any callbacks. This does not work:")]),e._v(" "),s("p",[s("code",[e._v("x.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[e._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'hello'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("0")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[s("code",[e._v("y.js")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" x "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./x'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\nconsole"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("x"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("a"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h4",{attrs:{id:"exports-shortcut"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#exports-shortcut"}},[e._v("#")]),e._v(" exports shortcut")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("exports")]),e._v(" variable is available within a module's file-level scope, and is\nassigned the value of "),s("code",[e._v("module.exports")]),e._v(" before the module is evaluated.")]),e._v(" "),s("p",[e._v("It allows a shortcut, so that "),s("code",[e._v("module.exports.f = ...")]),e._v(" can be written more\nsuccinctly as "),s("code",[e._v("exports.f = ...")]),e._v(". However, be aware that like any variable, if a\nnew value is assigned to "),s("code",[e._v("exports")]),e._v(", it is no longer bound to "),s("code",[e._v("module.exports")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("hello "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Exported from require of module")]),e._v("\nexports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" hello"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("false")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Not exported, only available in the module")]),e._v("\n")])])]),s("p",[e._v("When the "),s("code",[e._v("module.exports")]),e._v(" property is being completely replaced by a new\nobject, it is common to also reassign "),s("code",[e._v("exports")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[e._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("exports")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("Constructor")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ... etc.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("p",[e._v("To illustrate the behavior, imagine this hypothetical implementation of\n"),s("code",[e._v("require()")]),e._v(", which is quite similar to what is actually done by "),s("code",[e._v("require()")]),e._v(":")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("/* ... */")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" module "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(":")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" exports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Module code here. In this example, define a function.")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("someFunc")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n    exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" someFunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// At this point, exports is no longer a shortcut to module.exports, and")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// this module will still export an empty default object.")]),e._v("\n    module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" someFunc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// At this point, the module will now export someFunc, instead of the")]),e._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// default object.")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("return")]),e._v(" module"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("exports"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v("\n")])])]),s("h3",{attrs:{id:"module-filename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-filename"}},[e._v("#")]),e._v(" module.filename")]),e._v(" "),s("ul",[s("li",[e._v("{string}")])]),e._v(" "),s("p",[e._v("The fully resolved filename of the module.")]),e._v(" "),s("h3",{attrs:{id:"module-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-id"}},[e._v("#")]),e._v(" module.id")]),e._v(" "),s("ul",[s("li",[e._v("{string}")])]),e._v(" "),s("p",[e._v("The identifier for the module. Typically this is the fully resolved\nfilename.")]),e._v(" "),s("h3",{attrs:{id:"module-loaded"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-loaded"}},[e._v("#")]),e._v(" module.loaded")]),e._v(" "),s("ul",[s("li",[e._v("{boolean}")])]),e._v(" "),s("p",[e._v("Whether or not the module is done loading, or is in the process of\nloading.")]),e._v(" "),s("h3",{attrs:{id:"module-parent"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-parent"}},[e._v("#")]),e._v(" module.parent")]),e._v(" "),s("ul",[s("li",[e._v("{module}")])]),e._v(" "),s("p",[e._v("The module that first required this one.")]),e._v(" "),s("h3",{attrs:{id:"module-paths"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-paths"}},[e._v("#")]),e._v(" module.paths")]),e._v(" "),s("ul",[s("li",[e._v("{string[]}")])]),e._v(" "),s("p",[e._v("The search paths for the module.")]),e._v(" "),s("h3",{attrs:{id:"module-require-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-require-id"}},[e._v("#")]),e._v(" module.require(id)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("id")]),e._v(" {string}")]),e._v(" "),s("li",[e._v("Returns: {any} exported module content")])]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("module.require()")]),e._v(" method provides a way to load a module as if\n"),s("code",[e._v("require()")]),e._v(" was called from the original module.")]),e._v(" "),s("p",[e._v("In order to do this, it is necessary to get a reference to the "),s("code",[e._v("module")]),e._v(" object.\nSince "),s("code",[e._v("require()")]),e._v(" returns the "),s("code",[e._v("module.exports")]),e._v(", and the "),s("code",[e._v("module")]),e._v(" is typically\n"),s("em",[e._v("only")]),e._v(" available within a specific module's code, it must be explicitly exported\nin order to be used.")]),e._v(" "),s("h2",{attrs:{id:"the-module-object-2"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-module-object-2"}},[e._v("#")]),e._v(" The "),s("code",[e._v("Module")]),e._v(" Object")]),e._v(" "),s("ul",[s("li",[e._v("{Object}")])]),e._v(" "),s("p",[e._v("Provides general utility methods when interacting with instances of\n"),s("code",[e._v("Module")]),e._v("  the "),s("code",[e._v("module")]),e._v(" variable often seen in file modules. Accessed\nvia "),s("code",[e._v("require('module')")]),e._v(".")]),e._v(" "),s("h3",{attrs:{id:"module-builtinmodules"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-builtinmodules"}},[e._v("#")]),e._v(" module.builtinModules")]),e._v(" "),s("ul",[s("li",[e._v("{string[]}")])]),e._v(" "),s("p",[e._v("A list of the names of all modules provided by Node.js. Can be used to verify\nif a module is maintained by a third party or not.")]),e._v(" "),s("p",[s("code",[e._v("module")]),e._v(" in this context isn't the same object that's provided\nby the "),s("a",{attrs:{href:"#modules_the_module_wrapper"}},[e._v("module wrapper")]),e._v(". To access it, require the "),s("code",[e._v("Module")]),e._v(" module:")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" builtin "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("builtinModules"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"module-createrequire-filename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-createrequire-filename"}},[e._v("#")]),e._v(" module.createRequire(filename)")]),e._v(" "),s("ul",[s("li",[s("code",[e._v("filename")]),e._v(" {string|URL} Filename to be used to construct the require\nfunction. Must be a file URL object, file URL string, or absolute path\nstring.")]),e._v(" "),s("li",[e._v("Returns: {require} Require function")])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" createRequire "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("from")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" require "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("createRequire")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("meta"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("url"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// sibling-module.js is a CommonJS module.")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" siblingModule "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./sibling-module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"module-createrequirefrompath-filename"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-createrequirefrompath-filename"}},[e._v("#")]),e._v(" module.createRequireFromPath(filename)")]),e._v(" "),s("blockquote",[s("p",[e._v("Stability: 0 - Deprecated: Please use "),s("a",{attrs:{href:"#modules_module_createrequire_filename"}},[s("code",[e._v("createRequire()")])]),e._v(" instead.")])]),e._v(" "),s("ul",[s("li",[s("code",[e._v("filename")]),e._v(" {string} Filename to be used to construct the relative require\nfunction.")]),e._v(" "),s("li",[e._v("Returns: {require} Require function")])]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" createRequireFromPath "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" requireUtil "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("createRequireFromPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'../src/utils/'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// Require `../src/utils/some-tool`")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("requireUtil")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'./some-tool'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])]),s("h3",{attrs:{id:"module-syncbuiltinesmexports"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#module-syncbuiltinesmexports"}},[e._v("#")]),e._v(" module.syncBuiltinESMExports()")]),e._v(" "),s("p",[e._v("The "),s("code",[e._v("module.syncBuiltinESMExports()")]),e._v(" method updates all the live bindings for\nbuiltin ES Modules to match the properties of the CommonJS exports. It does\nnot add or remove exported names from the ES Modules.")]),e._v(" "),s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" fs "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("const")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v(" syncBuiltinESMExports "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("require")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'module'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("readFile "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("delete")]),e._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("readFileSync"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\nfs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[e._v("newAPI")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("function")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("newAPI")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  "),s("span",{pre:!0,attrs:{class:"token comment"}},[e._v("// ...")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("syncBuiltinESMExports")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("import")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'fs'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[e._v("esmFS")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("=>")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("{")]),e._v("\n  assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("strictEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("esmFS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("readFile"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("null")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("strictEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'readFileSync'")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" fs"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token boolean"}},[e._v("true")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n  assert"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("strictEqual")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("esmFS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),e._v("newAPI"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(",")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("undefined")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(";")]),e._v("\n")])])])])}),[],!1,null,null,null);t.default=n.exports}}]);